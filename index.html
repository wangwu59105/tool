<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="expires" content="0"> 
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <title>轻运维</title>

    <style>
		.body{
			padding: 1rem 0 0;
		}
		.logoImg{
			text-align: center;
		}
		.logoImg img{
			width: 80%;
			margin-left: 6%;
		}
		.errorTxt{
			text-align: center;
			margin-top: 1rem;
			margin-left: 5%;
			width: 90%;
		}
		.mainErr{
			font-size: 22px;
		}
		.secErr {
			margin-top: 2rem;
			font-size: 14px;
			color: #9aa1a7;
		}
		.tipErr {
			margin-top: 2rem;
			font-size: 14px;
			color: #f84153;
		}
		.refreshButton{
			text-align: center;
			margin-top: 2rem;
		}
	    
	        .ipimage{
			margin-top: 2rem;
			font-size: 12px;
			color: #9aa1a7;
			text-align: center;

		}
		.refreshButton button{
			background-color: #f84153;
			width: 150px;
			height: 45px;
			border: currentColor;
			border-radius: 9px;
			color: white;
			font-size: 16px;
		}
	</style>
</head>
<body>
<div class="body">
    <div class="logoImg">
        <img src="./logo.png">
    </div>
    <div class="errorTxt">
        <p class="mainErr">DEEP轻运维</p>
        <p class="mainErr">免流量本地操作工具</p>
        <p class="secErr">系统还原，格式化内存卡，设备属性修改，读取设备文件</p>
        <p class="tipErr" id="ip"  onclick="setIP();" >IP：修改默认IP</p>

    </div>
    <div class="refreshButton">
        <button onclick="login()">开始使用</button>
    </div>
    <p class="ipimage"  onclick="showImage();" >IP查看方法</p>

</div>

<script type="text/javascript" >


  var ip = "192.168.43.1";
  function login(){
       if(ip!="" && ip.startsWith("192.")){
          var len = ip.lastIndexOf(".");
          var ipn= ip.substr(0,len);
          window.location.href="http://"+ipn+".1:8080/deep.html"
       }else{
         alert("请输入连接设备wifi的IP(192.)")
         setIP();
       }

    }
	
   function setIP(){
     var ipUser = prompt("请输入连接设备wifi的IP",ip);
     if(ipUser!=null && ip!="" && ip.startsWith("192.")){
	  if(!f_check_IP(ipUser)){
	      alert("热点IP地址填写错误")  
              return;
	  }   
	  document.getElementById("ip").innerHTML ="IP: "+ ipUser;
          ip = ipUser;  
	 }
    }
	

 function f_check_IP(ip)    { 
   var re=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/;//正则表达式   
   if(re.test(ip))   
   {   
       if( RegExp.$1<256 && RegExp.$2<256 && RegExp.$3<256 && RegExp.$4<256) 
       return true;   
   }   
   return false;    
}
	
	
   function showImage(){
        window.location.href="./ip.jpg"
    }

</script>
</body>
</html>
